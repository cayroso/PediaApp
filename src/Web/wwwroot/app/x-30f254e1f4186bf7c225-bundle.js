(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"2iVA":function(t,e,n){"use strict";var i={props:{viewMode:{type:String,required:!0}},data:()=>({moment:moment,busy:!1,id:null,item:{clinic:{},parent:{},child:{}},avatarSize:"md"}),computed:{canCancel(){const t=this,e=t.item;return 1===e.type?1===e.status||2===e.status:2===e.type?e.parent.parentId===t.uid&&(1===e.status||2===e.status):void 0},canAcceptReject(){const t=this.item;return 2===t.type&&t.status<7},canSetInProgress(){return 7===this.item.status},canComplete(){return 8===this.item.status}},methods:{reset(){this.item={clinic:{},parent:{},child:{}}},async open(t){const e=this;e.reset(),e.id=t,await e.get(),e.$refs.modal.show()},close(){this.$refs.modal.hide()},async get(){const t=this;if(!t.busy)try{await t.$util.axios.get(`/api/appointments/${t.id}`).then((e=>{t.item=e.data}))}catch(e){t.$util.handleError(e)}finally{t.busy=!1}},async cancelAppointment(){const t=this,e=t.item,n=prompt("Reason for Cancelling");if(!n)return;const i={appointmentId:e.appointmentId,token:e.token,notes:n};await t.$util.axios.put("/api/appointments/clinic/cancel",i).then((e=>{t.$emit("saved"),t.close()}))},async acceptAppointment(){const t=this,e=t.item,n={appointmentId:e.appointmentId,token:e.token};await t.$util.axios.put("/api/appointments/clinic/accept",n).then((e=>{t.$emit("saved"),t.close()}))},async rejectAppointment(){const t=this,e=t.item,n=prompt("Reason for Rejecting");if(!n)return;const i={appointmentId:e.appointmentId,token:e.token,notes:n};await t.$util.axios.put("/api/appointments/clinic/reject",i).then((e=>{t.$emit("saved"),t.close()}))},async setInProgressAppointment(){const t=this,e=t.item,n={appointmentId:e.appointmentId,token:e.token};await t.$util.axios.put("/api/appointments/clinic/inprogress",n).then((e=>{t.$emit("saved"),t.close()}))},async completeAppointment(){const t=this,e=t.item,n={appointmentId:e.appointmentId,token:e.token};await t.$util.axios.put("/api/appointments/clinic/complete",n).then((e=>{t.$emit("saved"),t.close()}))}}},a=(n("z9AA"),n("KHd+")),s=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{"no-close-on-esc":!1,"no-close-on-backdrop":!0,scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[n("div",{staticClass:"w-100"},[n("div",{staticClass:"d-flex flex-row  align-items-center justify-content-between"},[n("h5",{staticClass:"m-0"},[t._v("\n                    View Appointment\n                ")])])])]},proxy:!0},{key:"modal-footer",fn:function(){return[t.canCancel?n("button",{staticClass:"btn btn-warning",on:{click:t.cancelAppointment}},[t._v("\n            Cancel\n        ")]):t._e(),t._v(" "),"clinic"===t.viewMode?[t.canAcceptReject?n("button",{staticClass:"btn btn-success",on:{click:t.acceptAppointment}},[t._v("\n                Accept\n            ")]):t._e(),t._v(" "),t.canAcceptReject?n("button",{staticClass:"btn btn-warning",on:{click:t.rejectAppointment}},[t._v("\n                Reject\n            ")]):t._e(),t._v(" "),t.canSetInProgress?n("button",{staticClass:"btn btn-success",on:{click:t.setInProgressAppointment}},[t._v("\n                Set In Progress\n            ")]):t._e(),t._v(" "),t.canComplete?n("button",{staticClass:"btn btn-info",on:{click:t.completeAppointment}},[t._v("\n                Completed\n            ")]):t._e()]:t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary ml-auto",on:{click:t.close}},[t._v("\n            Close\n        ")])]},proxy:!0}])},[t._v(" "),t._v(" "),n("div",[n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Type")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t.item.typeText)+"\n                ")])]),t._v(" "),n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Status")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t.item.statusText)+"\n                    "),n("div",{staticClass:"mt-2 small mr-2"},[t._v("\n                        "+t._s(t.item.statusReason)+"\n                    ")])])])]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Start")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t._f("moment")(t.item.dateStart,"calendar"))+"\n                ")])]),t._v(" "),n("div",{staticClass:"form-group col-md"},[n("label",[t._v("End")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t._f("moment")(t.item.dateEnd,"calendar"))+"\n                ")])])]),t._v(" "),"parent"===t.viewMode?[n("div",{staticClass:"form-group"},[n("label",[t._v("Clinic")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("                        \n                    "+t._s(t.item.clinic.name)+"\n                ")])])]:t._e(),t._v(" "),"clinic"===t.viewMode?[n("div",{staticClass:"form-group"},[n("label",[t._v("Parent")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[n("span",{on:{mouseover:function(e){t.avatarSize="6rem"},mouseleave:function(e){t.avatarSize=""}}},[n("b-avatar",{attrs:{src:t.item.parent.imageUrl,size:t.avatarSize}})],1),t._v("\n                    "+t._s(t.item.parent.name)+"\n                ")])]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Phone")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.parent.phoneNumber)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Email")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.item.parent.email)+"\n                    ")])])])]:t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Child")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[n("b-avatar",{attrs:{src:t.item.child.imageUrl}}),t._v("\n                "+t._s(t.item.child.firstName)+" "+t._s(t.item.child.middleName)+" "+t._s(t.item.child.lastName)+"\n            ")],1)]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Gender")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t.item.child.genderText)+"\n                ")])]),t._v(" "),n("div",{staticClass:"form-group col-md"},[n("label",[t._v("Date of Birth")]),t._v(" "),n("div",{staticClass:"form-control-plaintext"},[t._v("\n                    "+t._s(t._f("moment")(t.item.child.dateOfBirth,"calendar"))+"\n                ")])])])],2)])}),[],!1,null,"559b0ab2",null);e.a=s.exports},drtX:function(t,e,n){},z9AA:function(t,e,n){"use strict";n("drtX")}}]);