(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"8KAK":function(e,t,r){"use strict";var i=r("EQT1");t.a={props:{},mixins:[i.a],data:()=>({filter:{query:{criteria:"",pageIndex:1,pageSize:10,sortOrder:-1,sortField:""},items:[],selected:null,visible:!1}}),async created(){},methods:{initializeFilter(e){const t=this.filter,r=new URLSearchParams(window.location.search);t.query.criteria=r.get("c")||e.criteria||t.query.criteria,t.query.pageIndex=parseInt(r.get("p"),10)||e.pageIndex||t.query.pageIndex,t.query.pageSize=parseInt(r.get("s"),10)||e.pageSize||t.query.pageSize,t.query.sortField=r.get("sf")||e.sortField||t.query.sortField,t.query.sortOrder=parseInt(r.get("so"),10)||e.sortOrder||t.query.sortOrder,t.visible=e.visible||t.visible},getQuery(){const e=this.filter;if(this.busy)return;return["?c=",encodeURIComponent(e.query.criteria),"&p=",e.query.pageIndex,"&s=",e.query.pageSize,"&sf=",e.query.sortField,"&so=",e.query.sortOrder].join("")},saveQuery(){const e=this.filter;localStorage.setItem(e.cacheKey,JSON.stringify({criteria:e.query.criteria,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize,sortField:e.query.sortField,sortOrder:e.query.sortOrder,visible:e.visible}))},async _search(){const e=this;if(e.busy)return;const t=e.getQuery();e.busy=!0,await e.search_internal(e.baseUrl,t,e.title,(()=>{e.saveQuery()}),(()=>{localStorage.removeItem(e.filter.cacheKey)}),(()=>{e.busy=!1}))},async search(e){const t=this;e>0&&(t.filter.query.pageIndex=e),await t._search()},async search_internal(e,t,r,i,s,a){const l=this;let n=l.filter;try{n.selected=null,await l.$util.axios(`${e}/${t}`).then((e=>{n=Object.assign(n,e.data);let s=location.pathname;s.endsWith("/")?s+=t:s+="/"+t,l.$util.replaceState(t,r,s),n.items.forEach((e=>{l.$set(e,"expand",!1)})),i()}))}catch(e){s(),l.$util.handleError(e)}finally{a(),l.scrollIntoView()}},getRowNumber(e){const t=this.filter;return(t.pageIndex-1)*t.pageSize+(e+1)},setSelected(e){const t=this.filter;t.selected&&e&&t.selected===e||(t.selected&&(t.selected.expand=!1),t.selected=e,t.selected.expand=!0)},isSelected(e){const t=this.filter;return null!==e&&(null!==t.selected&&e===t.selected)}}}}}]);